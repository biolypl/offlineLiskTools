<!DOCTYPE html>
<head>
	<meta charset="utf-8"> 
	<title>Offline version of Lisk "second secret registration" transaction generator</title>
	<link rel="stylesheet" href="myliskstyle.css">
	<script src="lisk-js.js"></script>
	<script type="text/javascript" src="qrcode.js"></script>	
</head>
<body>
<h1>Instruction to create a "second secret registration" transaction (Type 1)</h1>
<h2>1. Insert correct passphrase's, else the transaction will not be signed correctly</h2>
<h2>2. For adding a second secret fee is 5 LSK. The fee will be taken from account balance!</br> 
Please store the second passphrase in a secure place. If you lose it you will never have accesss to your funds again!!!</h2>
<h2>3. This tool is only for creating and signing the transaction. To send the transaction use the onlineTool.</h2>
<h2>4. Scan the QRCode at the bottom of this page with your online PC and send the transaction.</h2>
<form id="frm" name="frm">
  <input type="text" name="pass1" id="pass1" placeholder="Your passphrase" required><br>
  <input type="text" name="pass2" id="pass2" placeholder="Your desired second passphrase"><br>
  <input type="button" onclick="get()" value="Generate transaction" class="btn">
</form>
<p><strong>Transaction: </strong><span id="transaction" /></p>
<div id="qrcode" style="width:500px; height:500px; margin-top:15px;"></div>
<script>
	var receiver, amount;
	
	function get(){
		var qrcode = new QRCode(document.getElementById("qrcode"), {
			width : 500,
			height : 500
		});
		var pass = document.forms['frm'].elements['pass1'].value;
		pass = pass.trim();
		var second = document.forms['frm'].elements['pass2'].value;
		second = second.trim();
		var transaction = lisk.signature.createSignature(pass, second);
		document.getElementById("transaction").innerHTML = JSON.stringify(transaction);

		function makeCode () {
			var elText = JSON.stringify(transaction);
			
			if (!elText) {
				alert("Transaction was empty");
				elText.focus();
				return;
			}
			qrcode.makeCode(elText);
		}
		makeCode();
	}
</script>
</body>
